services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
      target: production
    ports:
      - "${APP_PORT:-8000}:80"
    environment:
      - APP_NAME=${APP_NAME:-FraudBlocker}
      - APP_ENV=${APP_ENV:-production}
      - APP_KEY=${APP_KEY}
      - APP_DEBUG=${APP_DEBUG:-false}
      - APP_URL=${APP_URL:-http://localhost:8000}
      - DB_CONNECTION=${DB_CONNECTION:-mysql}
      - DB_LINK=${DB_LINK:-}
      - QUEUE_CONNECTION=${QUEUE_CONNECTION:-database}
      - CACHE_STORE=${CACHE_STORE:-database}
      - SESSION_DRIVER=${SESSION_DRIVER:-database}
      - FRAUD_DETECTION_ENABLED=${FRAUD_DETECTION_ENABLED:-true}
      - IPINFO_TOKEN=${IPINFO_TOKEN:-}
      - IPINFO_ENABLED=${IPINFO_ENABLED:-true}
      - GOOGLE_ADS_CLIENT_ID=${GOOGLE_ADS_CLIENT_ID:-}
      - GOOGLE_ADS_CLIENT_SECRET=${GOOGLE_ADS_CLIENT_SECRET:-}
      - GOOGLE_ADS_DEVELOPER_TOKEN=${GOOGLE_ADS_DEVELOPER_TOKEN:-}
      - GOOGLE_ADS_REDIRECT_URI=${GOOGLE_ADS_REDIRECT_URI:-}
    volumes:
      - app-storage:/var/www/html/storage
      - app-db:/var/www/html/database
    restart: unless-stopped

volumes:
  app-storage:
  app-db:
